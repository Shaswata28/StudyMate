# =============================================================================
# StudyMate FastAPI Backend - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# Never commit the .env file to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
# Protects against API quota exhaustion and abuse
# RATE_LIMIT_REQUESTS: Maximum number of requests allowed per time window
# RATE_LIMIT_WINDOW: Time window in seconds
# Default: 15 requests per 60 seconds (per IP address)
RATE_LIMIT_REQUESTS=15
RATE_LIMIT_WINDOW=60

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins for CORS
# Development: http://localhost:8080
# Production: Add your production frontend URL (e.g., https://studymate.com)
ALLOWED_ORIGINS=http://localhost:8080

# -----------------------------------------------------------------------------
# Supabase Configuration (REQUIRED for database operations)
# -----------------------------------------------------------------------------
# Get these values from your Supabase project dashboard:
# https://app.supabase.com/project/[your-project]/settings/api

# SUPABASE_URL: Your Supabase project URL
# Format: https://[project-ref].supabase.co
SUPABASE_URL=https://your-project-ref.supabase.co

# SUPABASE_ANON_KEY: Public anonymous key (safe for client-side use)
# Used for operations with Row Level Security (RLS) enforcement
SUPABASE_ANON_KEY=your_anon_key_here

# SUPABASE_SERVICE_ROLE_KEY: Service role key (KEEP SECRET!)
# Used for admin operations that bypass RLS
# Never expose this key to the client side!
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# SUPABASE_DB_PASSWORD: Database password (KEEP SECRET!)
# This is your PostgreSQL database password from Supabase project settings
# Required for running database migrations
# Get it from: https://app.supabase.com/project/[your-project]/settings/database
SUPABASE_DB_PASSWORD=your_database_password_here

# -----------------------------------------------------------------------------
# AI Brain Service Configuration
# -----------------------------------------------------------------------------
# Local AI Brain service for OCR and embedding generation
# The AI Brain service must be running for material processing to work

# AI_BRAIN_ENDPOINT: URL of the AI Brain service
# Default: http://localhost:8001
AI_BRAIN_ENDPOINT=http://localhost:8001

# AI_BRAIN_TIMEOUT: Request timeout in seconds for AI Brain operations
# OCR processing can take several minutes for large PDFs
# Default: 300.0 (5 minutes)
AI_BRAIN_TIMEOUT=300.0

# -----------------------------------------------------------------------------
# Retry Configuration for Transient Failures
# -----------------------------------------------------------------------------
# Configure retry behavior for transient failures (network issues, temporary service unavailability)

# MAX_RETRY_ATTEMPTS: Maximum number of retry attempts for failed operations
# Default: 3
MAX_RETRY_ATTEMPTS=3

# RETRY_DELAY_SECONDS: Initial delay in seconds before first retry
# Default: 2.0
RETRY_DELAY_SECONDS=2.0

# RETRY_BACKOFF_MULTIPLIER: Multiplier for exponential backoff between retries
# Each retry delay = RETRY_DELAY_SECONDS * (RETRY_BACKOFF_MULTIPLIER ^ (attempt - 1))
# Example with defaults: 2s, 4s, 8s
# Default: 2.0
RETRY_BACKOFF_MULTIPLIER=2.0
